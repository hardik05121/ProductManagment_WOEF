
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[CompanyUpsert]    @Id int,	@Title nvarchar(50),	@Currency nvarchar(450),	@Address nvarchar(450),	@PhoneNumber bigint,	@Email nvarchar(450),	@IsActive bit,	@CompanyImage nvarchar(450)	ASBEGIN	SET NOCOUNT ON; IF @Id = 0    BEGIN         -- Check if the BrandName already exists        IF NOT EXISTS (SELECT * FROM companies WHERE Title = @Title)        BEGIN            INSERT INTO companies(Title,Currency,Address,PhoneNumber,Email,IsActive,CompanyImage)            VALUES(@Title,@Currency,@Address,@PhoneNumber,@Email,@IsActive,@CompanyImage)        END        ELSE        BEGIN            -- Handle the case when the BrandName already exists            RAISERROR('Company with the same name already exists.', 16, 1);        END    END    ELSE    BEGIN        -- Check if the BrandName already exists for a different brand (when performing an update)        IF NOT EXISTS (SELECT * FROM companies WHERE Title = @Title AND Id <> @Id)        BEGIN            UPDATE companies            SET                Title = @Title,                Currency = @Currency,				Address = @Address,				PhoneNumber = @PhoneNumber,				Email = @Email,				IsActive = @IsActive,				CompanyImage = @CompanyImage            WHERE Id = @Id        END        ELSE        BEGIN            -- Handle the case when the BrandName already exists for a different brand            RAISERROR('Company with the same name already exists for a different brand.', 16, 1);        END    ENDEND